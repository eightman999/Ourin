<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YAYA Core Documentation Index</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", "Hiragino Kaku Gothic ProN", "Hiragino Sans", "æ¸¸ã‚´ã‚·ãƒƒã‚¯", YuGothic, "ãƒ¡ã‚¤ãƒªã‚ª", Meiryo, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .content {
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .lang-switcher {
            text-align: right;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
        }
        .lang-switcher a {
            margin: 0 5px;
            padding: 5px 15px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 3px;
            text-decoration: none;
            color: #333;
        }
        .lang-switcher a:hover {
            background-color: #e0e0e0;
        }
        .lang-switcher a.active {
            background-color: #0066cc;
            color: white;
            border-color: #0066cc;
        }
        h1 {
            border-bottom: 3px solid #333;
            padding-bottom: 10px;
            color: #333;
        }
        h2 {
            border-bottom: 2px solid #666;
            padding-bottom: 8px;
            margin-top: 30px;
            color: #444;
        }
        h3 {
            margin-top: 25px;
            color: #555;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: "SF Mono", "Menlo", "Monaco", "Courier New", monospace;
            font-size: 0.9em;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #333;
        }
        pre code {
            background-color: transparent;
            padding: 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f8f8f8;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        a {
            color: #0066cc;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        blockquote {
            border-left: 4px solid #ddd;
            padding-left: 20px;
            margin-left: 0;
            color: #666;
            font-style: italic;
        }
        ul, ol {
            padding-left: 30px;
        }
        li {
            margin: 8px 0;
        }
        hr {
            border: none;
            border-top: 2px solid #ddd;
            margin: 30px 0;
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #0066cc;
            text-decoration: none;
        }
        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="content">
        <div class="lang-switcher">
            
        </div>
        <div class="back-link">
            <a href="index.html">â† Back to Index</a>
        </div>
        <h1 id="yaya-core-documentation-index">YAYA Core Documentation Index</h1>
<p><strong>Last Updated</strong>: 2025-10-16<br />
<strong>Status</strong>: Investigation Complete, Ready for Implementation</p>
<hr />
<h2 id="quick-navigation">ğŸ“‹ Quick Navigation</h2>
<h3 id="for-decision-makers">For Decision Makers</h3>
<ul>
<li><strong><a href="YAYA_CORE_EXECUTIVE_SUMMARY.md">Executive Summary</a></strong> (English, 7 min read)</li>
<li>TL;DR of findings and recommendations</li>
<li>Timeline and budget overview</li>
<li>Key technical decisions</li>
</ul>
<h3 id="for-project-managers">For Project Managers</h3>
<ul>
<li><strong><a href="YAYA_CORE_INVESTIGATION_REPORT.md">Investigation Report</a></strong> (æ—¥æœ¬èª, 10 min read)</li>
<li>Current status analysis</li>
<li>Risk assessment</li>
<li>
<p>Resource requirements</p>
</li>
<li>
<p><strong><a href="YAYA_CORE_IMPLEMENTATION_PLAN.md">Implementation Plan</a></strong> (æ—¥æœ¬èª, 15 min read)</p>
</li>
<li>3-phase roadmap with detailed breakdown</li>
<li>Week-by-week tasks</li>
<li>Success criteria</li>
</ul>
<h3 id="for-developers">For Developers</h3>
<ul>
<li><strong><a href="YAYA_CORE_TECHNICAL_SPEC.md">Technical Specification</a></strong> (æ—¥æœ¬èª, 25 min read)</li>
<li>Complete YAYA language specification</li>
<li>API definitions</li>
<li>
<p>Code examples and test cases</p>
</li>
<li>
<p><strong><a href="YAYA_CORE_ARCHITECTURE.md">Architecture Diagrams</a></strong> (English, 10 min read)</p>
</li>
<li>Visual system overview</li>
<li>Component responsibilities</li>
<li>
<p>Data flow illustrations</p>
</li>
<li>
<p><strong><a href="../yaya_core/README.md">Developer Quick Start</a></strong> (English, 5 min read)</p>
</li>
<li>Build instructions</li>
<li>IPC protocol reference</li>
<li>Testing guide</li>
</ul>
<h3 id="related-specifications">Related Specifications</h3>
<ul>
<li><strong><a href="OURIN_YAYA_ADAPTER_SPEC_1.0M.md">YAYA Adapter Spec</a></strong> (æ—¥æœ¬èª)</li>
<li>IPC protocol specification</li>
<li>
<p>Message format definitions</p>
</li>
<li>
<p><strong><a href="OURIN_USL_1.0M_SPEC.md">USL Spec</a></strong> (æ—¥æœ¬èª)</p>
</li>
<li>Universal SHIORI Loader specification</li>
<li>Module loading requirements</li>
</ul>
<hr />
<h2 id="documentation-overview">ğŸ“Š Documentation Overview</h2>
<table>
<thead>
<tr>
<th>Document</th>
<th>Language</th>
<th>Size</th>
<th>Target Audience</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Executive Summary</td>
<td>EN</td>
<td>7 KB</td>
<td>Stakeholders</td>
<td>Decision making</td>
</tr>
<tr>
<td>Investigation Report</td>
<td>JA</td>
<td>8 KB</td>
<td>PM / Tech Lead</td>
<td>Status &amp; risks</td>
</tr>
<tr>
<td>Implementation Plan</td>
<td>JA</td>
<td>9 KB</td>
<td>PM / Developers</td>
<td>Roadmap</td>
</tr>
<tr>
<td>Technical Spec</td>
<td>JA</td>
<td>15 KB</td>
<td>Developers</td>
<td>Implementation</td>
</tr>
<tr>
<td>Architecture</td>
<td>EN</td>
<td>20 KB</td>
<td>Developers</td>
<td>System design</td>
</tr>
<tr>
<td>Quick Start</td>
<td>EN</td>
<td>7 KB</td>
<td>Developers</td>
<td>Getting started</td>
</tr>
</tbody>
</table>
<p><strong>Total</strong>: ~66 KB of comprehensive documentation</p>
<hr />
<h2 id="investigation-summary">ğŸ” Investigation Summary</h2>
<h3 id="what-we-found">What We Found</h3>
<p><strong>The yaya_core module EXISTS in the repository</strong>, but only the IPC communication layer is implemented. The actual YAYA language interpreter (parser, VM, built-in functions) is <strong>NOT implemented</strong> (stub only).</p>
<h3 id="current-status-matrix">Current Status Matrix</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Status</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td>IPC Framework</td>
<td>âœ… Complete</td>
<td>JSON line-based stdin/stdout</td>
</tr>
<tr>
<td>Command Dispatch</td>
<td>âœ… Complete</td>
<td>load/request/unload</td>
</tr>
<tr>
<td>Swift Integration</td>
<td>âœ… Complete</td>
<td>YayaAdapter.swift</td>
</tr>
<tr>
<td>Build System</td>
<td>âœ… Complete</td>
<td>CMake, Universal Binary</td>
</tr>
<tr>
<td>Dictionary Parser</td>
<td>âŒ Stub</td>
<td>Needs implementation</td>
</tr>
<tr>
<td>YAYA VM</td>
<td>âŒ Stub</td>
<td>Needs implementation</td>
</tr>
<tr>
<td>Built-in Functions</td>
<td>âŒ Stub</td>
<td>Needs implementation</td>
</tr>
<tr>
<td>SHIORI Adapter</td>
<td>âŒ Stub</td>
<td>Needs implementation</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="key-recommendations">ğŸ¯ Key Recommendations</h2>
<h3 id="recommended-approach">Recommended Approach</h3>
<p><strong>Continue with C++ for Phase 1-2, consider Swift migration in Phase 3+</strong></p>
<p><strong>Why C++?</strong>
1. Existing IPC framework already in C++
2. Can reference official YAYA implementation (BSD-3-Clause)
3. Better performance for parser/VM
4. CMake already configured for Universal Binary
5. Process isolation allows future Swift migration</p>
<p><strong>Why not Swift immediately?</strong>
1. Less reference material available
2. Parser/VM libraries less mature
3. Performance tuning more challenging
4. Can always migrate later (IPC isolation)</p>
<h3 id="implementation-timeline">Implementation Timeline</h3>
<div class="codehilite"><pre><span></span><code><span class="n">Phase</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">MVP</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="n">weeks</span><span class="p">)</span>
<span class="err">â”œâ”€</span><span class="w"> </span><span class="n">Week</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">Lexer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">loading</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="o">/</span><span class="n">CP932</span><span class="w"> </span><span class="n">support</span>
<span class="err">â”œâ”€</span><span class="w"> </span><span class="n">Week</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">Parser</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">VM</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">basic</span><span class="w"> </span><span class="n">built</span><span class="o">-</span><span class="ow">in</span><span class="w"> </span><span class="n">functions</span>
<span class="err">â””â”€</span><span class="w"> </span><span class="n">Week</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">SHIORI</span><span class="w"> </span><span class="n">integration</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Emily4</span><span class="w"> </span><span class="n">testing</span>

<span class="n">Phase</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">Extended</span><span class="w"> </span><span class="n">Features</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="n">weeks</span><span class="p">)</span>
<span class="err">â”œâ”€</span><span class="w"> </span><span class="n">Arrays</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">dictionaries</span>
<span class="err">â”œâ”€</span><span class="w"> </span><span class="n">Loop</span><span class="w"> </span><span class="n">structures</span><span class="w"> </span><span class="p">(</span><span class="k">while</span><span class="o">/</span><span class="n">foreach</span><span class="p">)</span>
<span class="err">â”œâ”€</span><span class="w"> </span><span class="n">Regular</span><span class="w"> </span><span class="n">expressions</span>
<span class="err">â””â”€</span><span class="w"> </span><span class="n">Performance</span><span class="w"> </span><span class="n">optimization</span>

<span class="n">Phase</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">Quality</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">Optimization</span><span class="w"> </span><span class="p">(</span><span class="n">ongoing</span><span class="p">)</span>
<span class="err">â”œâ”€</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">leak</span><span class="w"> </span><span class="n">validation</span>
<span class="err">â”œâ”€</span><span class="w"> </span><span class="n">Performance</span><span class="w"> </span><span class="n">profiling</span>
<span class="err">â”œâ”€</span><span class="w"> </span><span class="n">Multi</span><span class="o">-</span><span class="n">ghost</span><span class="w"> </span><span class="n">compatibility</span>
<span class="err">â””â”€</span><span class="w"> </span><span class="p">(</span><span class="n">Optional</span><span class="p">)</span><span class="w"> </span><span class="n">Swift</span><span class="w"> </span><span class="n">VM</span><span class="w"> </span><span class="n">migration</span>
</code></pre></div>

<h3 id="success-criteria">Success Criteria</h3>
<p><strong>Phase 1 MVP is complete when</strong>:
- âœ… Emily4 ghost boots successfully
- âœ… OnBoot event executes and returns SakuraScript
- âœ… Basic dialogue works (user can interact)
- âœ… Runs on both Intel and Apple Silicon Macs
- âœ… Supports UTF-8 and CP932 dictionary files</p>
<hr />
<h2 id="architecture-quick-reference">ğŸ—ï¸ Architecture Quick Reference</h2>
<h3 id="system-layers">System Layers</h3>
<div class="codehilite"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Ourin.app (Swift)              â”‚
â”‚   - UI Layer                     â”‚
â”‚   - YayaAdapter (IPC Client)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ JSON over Process I/O
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   yaya_core (C++ Executable)     â”‚
â”‚   - IPC Server                   â”‚
â”‚   - Dictionary Manager           â”‚
â”‚   - Lexer/Parser/VM              â”‚
â”‚   - SHIORI Adapter               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="component-responsibilities">Component Responsibilities</h3>
<p><strong>Swift Layer</strong> (No changes needed):
- Launch yaya_core process
- Manage process lifecycle
- JSON encoding/decoding
- Error propagation to UI</p>
<p><strong>C++ Layer</strong> (Implementation needed):
- Load and parse .dic files
- Execute YAYA scripts
- Manage variables and functions
- Generate SHIORI responses</p>
<hr />
<h2 id="dependencies">ğŸ“¦ Dependencies</h2>
<h3 id="required-libraries">Required Libraries</h3>
<table>
<thead>
<tr>
<th>Library</th>
<th>Purpose</th>
<th>License</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>nlohmann/json</td>
<td>JSON IPC</td>
<td>MIT</td>
<td>âœ… Already used</td>
</tr>
<tr>
<td>ICU</td>
<td>Character encoding</td>
<td>Unicode</td>
<td>âœ… macOS system</td>
</tr>
<tr>
<td>std::regex</td>
<td>Regular expressions</td>
<td>-</td>
<td>âœ… C++11 stdlib</td>
</tr>
<tr>
<td>Google Test</td>
<td>Unit testing</td>
<td>BSD-3</td>
<td>ğŸ“¦ To be added</td>
</tr>
</tbody>
</table>
<p><strong>No additional dependencies</strong> beyond what's already in the project or macOS.</p>
<hr />
<h2 id="testing-strategy">ğŸ§ª Testing Strategy</h2>
<h3 id="test-resources-available">Test Resources Available</h3>
<ul>
<li><strong>Emily4 Ghost</strong>: 50+ dictionary files in <code>emily4/ghost/master/</code></li>
<li><strong>CORE_SAMPLES</strong>: Reference implementations</li>
<li><strong>Official YAYA</strong>: Can compare outputs</li>
</ul>
<h3 id="testing-approach">Testing Approach</h3>
<ol>
<li><strong>Unit Tests</strong>: Each component (Lexer, Parser, VM, etc.)</li>
<li><strong>Integration Tests</strong>: Load actual dictionary files</li>
<li><strong>System Tests</strong>: Full Emily4 ghost execution</li>
<li><strong>Compatibility Tests</strong>: Multiple ghosts, both architectures</li>
</ol>
<hr />
<h2 id="reference-materials">ğŸ“š Reference Materials</h2>
<h3 id="in-repository">In Repository</h3>
<ul>
<li><code>emily4/ghost/master/*.dic</code> - Real YAYA dictionaries (50+ files)</li>
<li><code>CORE_SAMPLES/</code> - C# SHIORI implementation (reference)</li>
<li><code>Ourin/Yaya/YayaAdapter.swift</code> - Swift integration (complete)</li>
</ul>
<h3 id="external-resources">External Resources</h3>
<ul>
<li><a href="https://github.com/YAYA-shiori/yaya-shiori">Official YAYA</a> - C++ implementation (BSD-3)</li>
<li><a href="https://emily.shillest.net/ayaya/">YAYA Documentation</a> - Language reference</li>
<li><a href="https://ssp.shillest.net/ukadoc/">Ukagaka Wiki</a> - Protocol specs</li>
<li><a href="https://github.com/apxxxxxxe/yaya-rs">yaya-rs</a> - Rust implementation (reference)</li>
</ul>
<hr />
<h2 id="getting-started">ğŸš€ Getting Started</h2>
<h3 id="for-developers-ready-to-implement">For Developers Ready to Implement</h3>
<ol>
<li><strong>Read in this order</strong>:</li>
<li><a href="../yaya_core/README.md">Quick Start</a> - Build and test current state</li>
<li><a href="YAYA_CORE_ARCHITECTURE.md">Architecture</a> - Understand system design</li>
<li><a href="YAYA_CORE_TECHNICAL_SPEC.md">Technical Spec</a> - Detailed implementation guide</li>
<li>
<p><a href="YAYA_CORE_IMPLEMENTATION_PLAN.md">Implementation Plan</a> - Week-by-week tasks</p>
</li>
<li>
<p><strong>Set up environment</strong>:
   <code>bash
   brew install cmake nlohmann-json
   cd yaya_core
   mkdir build &amp;&amp; cd build
   cmake ..
   make</code></p>
</li>
<li>
<p><strong>Start with Phase 1, Week 1</strong>:</p>
</li>
<li>Implement Lexer (tokenizer)</li>
<li>Add UTF-8/CP932 file loading</li>
<li>Write unit tests</li>
</ol>
<h3 id="for-reviewers">For Reviewers</h3>
<ol>
<li><strong>Start with</strong>: <a href="YAYA_CORE_EXECUTIVE_SUMMARY.md">Executive Summary</a></li>
<li><strong>Then read</strong>: <a href="YAYA_CORE_INVESTIGATION_REPORT.md">Investigation Report</a></li>
<li><strong>Review</strong>: <a href="YAYA_CORE_IMPLEMENTATION_PLAN.md">Implementation Plan</a></li>
</ol>
<hr />
<h2 id="questions-feedback">ğŸ“ Questions &amp; Feedback</h2>
<h3 id="common-questions">Common Questions</h3>
<p><strong>Q: Can we just use the Windows YAYA DLL?</strong><br />
A: No, Windows DLLs cannot run natively on macOS. We need a native reimplementation.</p>
<p><strong>Q: Why not Swift from the start?</strong><br />
A: C++ allows us to reference the official YAYA codebase and has better performance for parsers/VMs. We can migrate to Swift in Phase 3 if desired.</p>
<p><strong>Q: How compatible will this be with Windows YAYA?</strong><br />
A: We aim for behavioral compatibility (same input â†’ same output) but not binary compatibility. Some Windows-specific features may not be supported.</p>
<p><strong>Q: What about existing ghosts?</strong><br />
A: Emily4 is our primary test case. If it works with Emily4, it should work with most YAYA ghosts.</p>
<p><strong>Q: How long until we can use it?</strong><br />
A: Phase 1 MVP should be complete in 3 weeks, providing basic functionality.</p>
<hr />
<h2 id="document-change-log">ğŸ—‚ï¸ Document Change Log</h2>
<h3 id="2025-10-16-initial-release">2025-10-16 - Initial Release</h3>
<ul>
<li>Created complete documentation suite</li>
<li>Investigation report</li>
<li>Implementation plan (3 phases)</li>
<li>Technical specification</li>
<li>Architecture diagrams</li>
<li>Executive summary</li>
<li>This index file</li>
</ul>
<hr />
<h2 id="license">ğŸ“„ License</h2>
<p>All documentation: CC BY-NC-SA 4.0<br />
Code (yaya_core): BSD-3-Clause (YAYA compatible)</p>
<hr />
<p><strong>Project</strong>: Ourin (æ¡œéˆ´) - macOS Native Ukagaka Baseware<br />
<strong>Repository</strong>: https://github.com/eightman999/Ourin<br />
<strong>Documentation Path</strong>: <code>/docs/</code></p>
<p><strong>Prepared by</strong>: GitHub Copilot<br />
<strong>Date</strong>: 2025-10-16</p>
        <div class="footer">
            <p>Generated: 2025-10-23 | <a href="../README_ja-jp.md">Source (MD)</a></p>
        </div>
    </div>
</body>
</html>
