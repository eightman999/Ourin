<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YAYA Core 詳細実装計画書</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", "Hiragino Kaku Gothic ProN", "Hiragino Sans", "游ゴシック", YuGothic, "メイリオ", Meiryo, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .content {
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            border-bottom: 3px solid #333;
            padding-bottom: 10px;
            color: #333;
        }
        h2 {
            border-bottom: 2px solid #666;
            padding-bottom: 8px;
            margin-top: 30px;
            color: #444;
        }
        h3 {
            margin-top: 25px;
            color: #555;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: "SF Mono", "Menlo", "Monaco", "Courier New", monospace;
            font-size: 0.9em;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #333;
        }
        pre code {
            background-color: transparent;
            padding: 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f8f8f8;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        a {
            color: #0066cc;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        blockquote {
            border-left: 4px solid #ddd;
            padding-left: 20px;
            margin-left: 0;
            color: #666;
            font-style: italic;
        }
        ul, ol {
            padding-left: 30px;
        }
        li {
            margin: 8px 0;
        }
        hr {
            border: none;
            border-top: 2px solid #ddd;
            margin: 30px 0;
        }
        .toc {
            background-color: #f8f8f8;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        input[type="checkbox"] {
            margin-right: 8px;
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="content">
        <h1 id="yaya-core">YAYA Core 詳細実装計画書</h1>
<p><strong>日付</strong>: 2025-10-16<br />
<strong>バージョン</strong>: 1.0<br />
<strong>ステータス</strong>: Draft<br />
<strong>対象プラットフォーム</strong>: macOS (Universal Binary: arm64 + x86_64)</p>
<hr />
<h2 id="_1">目次</h2>
<ol>
<li><a href="#1-エグゼクティブサマリー">エグゼクティブサマリー</a></li>
<li><a href="#2-現状分析">現状分析</a></li>
<li><a href="#3-実装方針">実装方針</a></li>
<li><a href="#4-アーキテクチャ設計">アーキテクチャ設計</a></li>
<li><a href="#5-yaya言語仕様の実装範囲">YAYA言語仕様の実装範囲</a></li>
<li><a href="#6-実装フェーズ">実装フェーズ</a></li>
<li><a href="#7-技術選定">技術選定</a></li>
<li><a href="#8-依存関係とリソース">依存関係とリソース</a></li>
<li><a href="#9-リスクと対策">リスクと対策</a></li>
<li><a href="#10-テスト戦略">テスト戦略</a></li>
<li><a href="#11-参考資料">参考資料</a></li>
</ol>
<hr />
<h2 id="1">1. エグゼクティブサマリー</h2>
<h3 id="_2">目的</h3>
<p>macOS上でYAYAゴースト（伺か/ukagakaデスクトップマスコット）をネイティブ実行するため、Windows DLLに依存しないYAYA言語インタプリタを実装する。</p>
<h3 id="_3">現状</h3>
<ul>
<li>基本的な<strong>IPCフレームワーク</strong>は実装済み（JSON line-based protocol）</li>
<li>DictionaryManagerは<strong>スタブ実装</strong>のみ（実際のパース・実行機能なし）</li>
<li>Swift側のアダプタ（YayaAdapter.swift）は完成</li>
</ul>
<h3 id="_4">実装方針</h3>
<p><strong>ハイブリッドアプローチ</strong>：
- <strong>Phase 1</strong>: C++で高速なコアエンジンを実装（既存資産最大活用）
- <strong>Phase 2</strong>: 段階的にSwiftへ移行可能な設計
- 既存のオープンソースYAYA実装を参考にしつつ、macOSネイティブに最適化</p>
<hr />
<h2 id="2">2. 現状分析</h2>
<h3 id="21">2.1 既存実装の評価</h3>
<h4 id="_5">✅ 実装済み機能</h4>
<pre><code>yaya_core/
├── CMakeLists.txt          # Universal Binary対応済み
├── src/
│   ├── main.cpp           # JSON IPC実装済み
│   ├── YayaCore.cpp       # コマンドディスパッチ実装済み
│   └── DictionaryManager  # スタブのみ
</code></pre>
<p><strong>実装済みコマンド</strong>:
- <code>load</code>: 辞書ファイル読み込み（スタブ）
- <code>request</code>: SHIORI GET/NOTIFY処理（スタブ）
- <code>unload</code>: 辞書アンロード（スタブ）</p>
<h4 id="_6">❌ 未実装機能（重要度順）</h4>
<ol>
<li><strong>辞書パーサー</strong> (.dicファイルの字句解析・構文解析)</li>
<li><strong>YAYA VM</strong> (関数実行・変数管理・制御構造)</li>
<li><strong>組み込み関数</strong> (文字列操作・配列・SHIORI固有関数)</li>
<li><strong>文字コード処理</strong> (UTF-8/CP932変換)</li>
<li><strong>エラーハンドリング</strong> (構文エラー・実行時エラー)</li>
</ol>
<h3 id="22">2.2 参照可能なリソース</h3>
<h4 id="yaya">既存のYAYA実装</h4>
<ol>
<li><strong>YAYA (C++)</strong>: https://github.com/YAYA-shiori/yaya-shiori</li>
<li>公式Windows実装</li>
<li>BSD-3-Clause License（商用利用可能）</li>
<li>
<p>macOSポート可能性高い</p>
</li>
<li>
<p><strong>yaya-rs (Rust)</strong>: https://github.com/apxxxxxxe/yaya-rs</p>
</li>
<li>Rustによる再実装</li>
<li>
<p>YAYA仕様の現代的な解釈</p>
</li>
<li>
<p><strong>Emily4サンプル</strong>: <code>/emily4/ghost/master/*.dic</code></p>
</li>
<li>実際のYAYA辞書（50+ファイル）</li>
<li>テストケースとして活用可能</li>
</ol>
<h4 id="_7">ドキュメント</h4>
<ul>
<li><code>docs/OURIN_YAYA_ADAPTER_SPEC_1.0M.md</code>: IPC仕様</li>
<li><code>docs/OURIN_USL_1.0M_SPEC.md</code>: SHIORIローダー仕様</li>
<li>YAYA公式ドキュメント（Web）</li>
</ul>
<hr />
<h2 id="3">3. 実装方針</h2>
<h3 id="31-c-vs-swift">3.1 言語選択：C++ vs Swift</h3>
<h4 id="c">✅ 推奨：<strong>C++ベース実装</strong></h4>
<p><strong>理由</strong>:
1. <strong>既存資産の活用</strong>
   - 公式YAYAのC++コードを参考にできる
   - 文字列処理・正規表現ライブラリが成熟</p>
<ol>
<li><strong>パフォーマンス</strong></li>
<li>辞書パースは高速性が求められる</li>
<li>
<p>VM実行ループは低レイテンシが必要</p>
</li>
<li>
<p><strong>段階的移行が可能</strong></p>
</li>
<li>C++で実装→後でSwiftモジュールに分離可能</li>
<li>
<p>IPCレイヤーで分離されているため影響範囲が限定的</p>
</li>
<li>
<p><strong>Universal Binary対応</strong></p>
</li>
<li>CMakeで既にarm64/x86_64対応済み</li>
</ol>
<h4 id="_8">将来の移行パス（オプション）</h4>
<ul>
<li>Phase 3以降: SwiftでVM実装</li>
<li>Swift Concurrency活用</li>
<li>Xcode統合強化</li>
</ul>
<h3 id="32">3.2 実装スコープ</h3>
<h4 id="minimum-viable-product-mvp">Minimum Viable Product (MVP)</h4>
<p>基本的なYAYAゴーストを動作させるために必要な最小機能:</p>
<ol>
<li><strong>辞書読み込み</strong></li>
<li>UTF-8/CP932対応</li>
<li>
<p>基本的な構文解析（関数定義・変数）</p>
</li>
<li>
<p><strong>基本実行機能</strong></p>
</li>
<li>関数呼び出し</li>
<li>変数代入・参照</li>
<li>文字列連結</li>
<li>
<p>条件分岐（if/else）</p>
</li>
<li>
<p><strong>SHIORI統合</strong></p>
</li>
<li><code>OnBoot</code>, <code>OnClose</code> イベント</li>
<li>GET/NOTIFYレスポンス生成</li>
</ol>
<h4 id="extended-featuresphase-2">Extended Features（Phase 2以降）</h4>
<ul>
<li>配列・連想配列</li>
<li>ループ構造（while/foreach）</li>
<li>正規表現</li>
<li>SAORI連携</li>
<li>デバッグ機能</li>
</ul>
<hr />
<h2 id="4">4. アーキテクチャ設計</h2>
<h3 id="41">4.1 コンポーネント構成</h3>
<pre><code>yaya_core (C++実行体)
├── main.cpp              # IPC Entry Point
├── YayaCore              # メインコントローラー
├── DictionaryManager     # 辞書管理
│   ├── DictionaryLoader  # ファイル読み込み・文字コード変換
│   ├── Lexer            # 字句解析
│   └── Parser           # 構文解析
├── Runtime               # 実行エンジン
│   ├── VM                # 仮想マシン
│   ├── FunctionRegistry  # 関数テーブル
│   ├── VariableStore     # 変数ストレージ
│   └── BuiltinFunctions  # 組み込み関数
└── ShioriAdapter         # SHIORI/3.0M 変換
    ├── RequestParser     # SHIORIリクエスト解析
    └── ResponseBuilder   # SHIORIレスポンス構築
</code></pre>
<h3 id="42">4.2 データフロー</h3>
<pre><code>Swift (YayaAdapter)
    ↓ JSON {&quot;cmd&quot;:&quot;load&quot;, &quot;ghost_root&quot;:&quot;/path&quot;, &quot;dic&quot;:[&quot;a.dic&quot;]}
  IPC (stdin)
    ↓
main.cpp → YayaCore::processCommand()
    ↓
DictionaryManager::load()
    ├→ DictionaryLoader::readFile()  # UTF-8/CP932自動検出
    ├→ Lexer::tokenize()              # トークン分割
    └→ Parser::parse()                # AST構築
         └→ FunctionRegistry::register()

Swift (YayaAdapter)
    ↓ JSON {&quot;cmd&quot;:&quot;request&quot;, &quot;method&quot;:&quot;GET&quot;, &quot;id&quot;:&quot;OnBoot&quot;}
  IPC (stdin)
    ↓
YayaCore::processCommand()
    ↓
DictionaryManager::execute(&quot;OnBoot&quot;, [])
    ├→ FunctionRegistry::find(&quot;OnBoot&quot;)
    ├→ VM::execute(function, args)
    │   ├→ VariableStore::get/set()
    │   └→ BuiltinFunctions::call()
    └→ return &quot;\0\s[0]Hello\e&quot;  # SakuraScript
    ↓
  IPC (stdout)
    ↓ JSON {&quot;ok&quot;:true, &quot;status&quot;:200, &quot;value&quot;:&quot;\\0\\s[0]Hello\\e&quot;}
Swift (YayaAdapter)
</code></pre>
<h3 id="43">4.3 メモリ管理</h3>
<ul>
<li><strong>辞書データ</strong>: <code>std::shared_ptr</code> でライフタイム管理</li>
<li><strong>変数ストア</strong>: <code>std::unordered_map&lt;std::string, Value&gt;</code></li>
<li><strong>関数テーブル</strong>: <code>std::map&lt;std::string, std::shared_ptr&lt;Function&gt;&gt;</code></li>
<li><strong>IPC通信</strong>: 短命バッファ（スタック確保可能）</li>
</ul>
<hr />
<h2 id="5-yaya">5. YAYA言語仕様の実装範囲</h2>
<h3 id="51-phase-1-mvp">5.1 Phase 1: 基本機能（MVP）</h3>
<h4 id="_9">字句要素</h4>
<pre><code class="language-yaya">// コメント（行末まで）
/* ブロックコメント */

// 変数
_var = &quot;value&quot;
_num = 123

// 関数定義
OnBoot {
    &quot;\0\s[0]Hello&quot;
}
</code></pre>
<h4 id="_10">データ型</h4>
<ul>
<li><strong>文字列</strong>: <code>"..."</code> (SakuraScript含む)</li>
<li><strong>整数</strong>: <code>123</code>, <code>-456</code></li>
<li><strong>実数</strong>: <code>3.14</code> (オプション)</li>
</ul>
<h4 id="_11">演算子</h4>
<ul>
<li>代入: <code>=</code></li>
<li>算術: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code></li>
<li>比較: <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code></li>
<li>論理: <code>&amp;&amp;</code>, <code>||</code>, <code>!</code></li>
<li>文字列連結: <code>+</code> (自動変換)</li>
</ul>
<h4 id="_12">制御構造</h4>
<pre><code class="language-yaya">// 条件分岐
if condition {
    // ...
}
else {
    // ...
}

// 三項演算子
_result = condition ? true_value : false_value
</code></pre>
<h4 id="shiori">組み込み変数（SHIORI）</h4>
<ul>
<li><code>reference[0]</code>, <code>reference[1]</code>, ... : SHIORIリファレンス</li>
<li><code>RAND(max)</code>: 乱数生成</li>
<li><code>ARRAYSIZE(arr)</code>: 配列サイズ</li>
</ul>
<h3 id="52-phase-2">5.2 Phase 2: 拡張機能</h3>
<h4 id="_13">配列・連想配列</h4>
<pre><code class="language-yaya">_arr = (&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)
_dict = (&quot;key1&quot;:&quot;value1&quot;, &quot;key2&quot;:&quot;value2&quot;)
</code></pre>
<h4 id="_14">ループ</h4>
<pre><code class="language-yaya">while condition {
    // ...
}

foreach _arr; _item {
    // ...
}
</code></pre>
<h4 id="_15">正規表現</h4>
<pre><code class="language-yaya">if _str =~ &quot;pattern&quot; {
    // ...
}
</code></pre>
<hr />
<h2 id="6">6. 実装フェーズ</h2>
<h3 id="phase-1-mvp-2-3">Phase 1: MVP実装 (2-3週間)</h3>
<h4 id="week-1">Week 1: パーサー基盤</h4>
<ul>
<li>[x] プロジェクト構造確認</li>
<li>[ ] 字句解析器（Lexer）実装</li>
<li>トークン定義</li>
<li>ファイル読み込み</li>
<li>UTF-8/CP932変換</li>
<li>[ ] 構文解析器（Parser）基盤</li>
<li>AST定義</li>
<li>基本的な式解析</li>
</ul>
<h4 id="week-2-vm">Week 2: VM実装</h4>
<ul>
<li>[ ] 変数ストア実装</li>
<li>[ ] 関数レジストリ</li>
<li>[ ] VM実行エンジン</li>
<li>式評価</li>
<li>関数呼び出し</li>
<li>条件分岐</li>
<li>[ ] 基本組み込み関数</li>
<li>文字列操作</li>
<li>RAND()</li>
<li>reference[]</li>
</ul>
<h4 id="week-3-shiori">Week 3: SHIORI統合</h4>
<ul>
<li>[ ] ShioriAdapter実装</li>
<li>リクエスト解析</li>
<li>レスポンス構築</li>
<li>[ ] エラーハンドリング</li>
<li>[ ] Emily4でテスト</li>
<li>[ ] ドキュメント整備</li>
</ul>
<h3 id="phase-2-2-3">Phase 2: 拡張機能 (2-3週間)</h3>
<ul>
<li>[ ] 配列・連想配列</li>
<li>[ ] ループ構造</li>
<li>[ ] 正規表現サポート</li>
<li>[ ] パフォーマンス最適化</li>
<li>[ ] 包括的テストスイート</li>
</ul>
<h3 id="phase-3">Phase 3: 品質向上 (継続的)</h3>
<ul>
<li>[ ] メモリリーク検証（Valgrind/ASan）</li>
<li>[ ] パフォーマンスプロファイリング</li>
<li>[ ] 複数ゴーストでの動作確認</li>
<li>[ ] ドキュメント完成</li>
<li>[ ] (オプション) Swift VM移行検討</li>
</ul>
<hr />
<h2 id="7">7. 技術選定</h2>
<h3 id="71">7.1 必須ライブラリ</h3>
<h4 id="_16">既存</h4>
<ul>
<li><strong>nlohmann/json</strong>: JSON処理（IPC通信）</li>
</ul>
<h4 id="_17">追加推奨</h4>
<ul>
<li><strong>ICU (International Components for Unicode)</strong>: 文字コード変換</li>
<li>UTF-8 ↔ CP932</li>
<li>
<p>macOSにプリインストール済み</p>
</li>
<li>
<p><strong>std::regex</strong> (C++11標準): 正規表現</p>
</li>
<li>Phase 2で使用</li>
<li>追加依存なし</li>
</ul>
<h3 id="72">7.2 ビルドシステム</h3>
<h4 id="cmake">現状: CMake</h4>
<pre><code class="language-cmake"># yaya_core/CMakeLists.txt
set(CMAKE_OSX_ARCHITECTURES &quot;arm64;x86_64&quot;)  # ✅
find_package(nlohmann_json REQUIRED)         # ✅
</code></pre>
<h4 id="_18">追加設定</h4>
<pre><code class="language-cmake"># ICU検出
find_package(ICU REQUIRED COMPONENTS uc i18n)
target_link_libraries(yaya_core PRIVATE ICU::uc ICU::i18n)

# C++17機能使用
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
</code></pre>
<h3 id="73">7.3 テストフレームワーク</h3>
<ul>
<li><strong>Google Test</strong>: C++ユニットテスト</li>
<li><strong>統合テスト</strong>: Emily4サンプルゴーストで実際に動作確認</li>
</ul>
<hr />
<h2 id="8">8. 依存関係とリソース</h2>
<h3 id="81">8.1 外部依存</h3>
<table>
<thead>
<tr>
<th>依存</th>
<th>バージョン</th>
<th>ライセンス</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>nlohmann/json</td>
<td>3.x</td>
<td>MIT</td>
<td>JSON IPC</td>
</tr>
<tr>
<td>ICU</td>
<td>システム</td>
<td>Unicode</td>
<td>文字コード変換</td>
</tr>
<tr>
<td>GoogleTest</td>
<td>1.14+</td>
<td>BSD-3</td>
<td>テスト</td>
</tr>
</tbody>
</table>
<h3 id="82">8.2 参考実装</h3>
<ul>
<li><strong>公式YAYA</strong>: https://github.com/YAYA-shiori/yaya-shiori</li>
<li>ライセンス: BSD-3-Clause</li>
<li>参考範囲: アーキテクチャ設計、パーサーロジック</li>
<li>直接移植はせず、macOS最適化を優先</li>
</ul>
<h3 id="83">8.3 必要なリソース</h3>
<ul>
<li><strong>開発環境</strong>: macOS 13+ (Xcode 15+)</li>
<li><strong>ビルド時間</strong>: 約2-3分（Universal Binary）</li>
<li><strong>実行時メモリ</strong>: 辞書ごとに20-50MB（想定）</li>
</ul>
<hr />
<h2 id="9">9. リスクと対策</h2>
<h3 id="91">9.1 技術リスク</h3>
<table>
<thead>
<tr>
<th>リスク</th>
<th>影響度</th>
<th>対策</th>
</tr>
</thead>
<tbody>
<tr>
<td>YAYA仕様の曖昧さ</td>
<td>高</td>
<td>公式実装を参照・エミュレータテスト</td>
</tr>
<tr>
<td>文字コード問題</td>
<td>中</td>
<td>ICU使用・包括的テスト</td>
</tr>
<tr>
<td>パフォーマンス</td>
<td>中</td>
<td>プロファイリング・最適化</td>
</tr>
<tr>
<td>メモリリーク</td>
<td>中</td>
<td>Asan/Valgrind検証</td>
</tr>
</tbody>
</table>
<h3 id="92">9.2 スコープクリープ</h3>
<p><strong>対策</strong>:
- Phase 1はMVPに厳格に制限
- 機能追加はPhase 2以降
- Emily4が動作すればPhase 1完了</p>
<h3 id="93">9.3 互換性問題</h3>
<p><strong>対策</strong>:
- 複数ゴーストでテスト
- Windows版YAYAとの差分文書化
- 非互換部分はログ警告</p>
<hr />
<h2 id="10">10. テスト戦略</h2>
<h3 id="101">10.1 ユニットテスト</h3>
<pre><code class="language-cpp">// 例: Lexerテスト
TEST(LexerTest, TokenizeSimpleFunction) {
    Lexer lexer(&quot;OnBoot { \&quot;hello\&quot; }&quot;);
    auto tokens = lexer.tokenize();
    EXPECT_EQ(tokens[0].type, TokenType::Identifier);
    EXPECT_EQ(tokens[1].type, TokenType::LeftBrace);
    // ...
}
</code></pre>
<h3 id="102">10.2 統合テスト</h3>
<ol>
<li><strong>最小辞書テスト</strong></li>
</ol>
<pre><code class="language-yaya">// test_minimal.dic
OnBoot {
    &quot;\0\s[0]Test OK\e&quot;
}
</code></pre>
<ol>
<li><strong>Emily4フルテスト</strong></li>
<li>全50+辞書ファイル読み込み</li>
<li>OnBoot実行</li>
<li>主要イベント応答確認</li>
</ol>
<h3 id="103">10.3 パフォーマンステスト</h3>
<ul>
<li><strong>ベンチマーク</strong>: 辞書読み込み時間 &lt; 500ms</li>
<li><strong>レイテンシ</strong>: <code>OnBoot</code> 応答 &lt; 50ms</li>
<li><strong>メモリ</strong>: 辞書ロード後 &lt; 100MB</li>
</ul>
<hr />
<h2 id="11">11. 参考資料</h2>
<h3 id="111">11.1 既存ドキュメント</h3>
<ul>
<li><code>docs/OURIN_YAYA_ADAPTER_SPEC_1.0M.md</code>: IPC仕様</li>
<li><code>docs/OURIN_USL_1.0M_SPEC.md</code>: SHIORIローダー</li>
<li><code>docs/SHIORI_3.0M_SPEC.md</code>: SHIORIプロトコル</li>
</ul>
<h3 id="112">11.2 外部リソース</h3>
<ul>
<li>YAYA公式: https://emily.shillest.net/ayaya/</li>
<li>YAYA GitHub: https://github.com/YAYA-shiori/yaya-shiori</li>
<li>伺かWiki: https://ssp.shillest.net/ukadoc/</li>
<li>SHIORI仕様: https://emily.shillest.net/shiori/</li>
</ul>
<h3 id="113">11.3 サンプルコード</h3>
<ul>
<li><code>emily4/ghost/master/*.dic</code>: 実際のYAYA辞書</li>
<li><code>CORE_SAMPLES/</code>: C# SHIORI実装例</li>
<li><code>Ourin/Yaya/YayaAdapter.swift</code>: Swift IPC実装</li>
</ul>
<hr />
<h2 id="_19">まとめ</h2>
<h3 id="_20">推奨実装アプローチ</h3>
<ol>
<li><strong>Phase 1をC++で実装</strong> (現状維持・既存資産活用)</li>
<li><strong>MVP完成後にSwift移行を検討</strong> (将来オプション)</li>
<li><strong>公式YAYAを参考にしつつmacOS最適化</strong></li>
</ol>
<h3 id="_21">成功基準</h3>
<ul>
<li>✅ Emily4ゴーストが起動する</li>
<li>✅ 基本的な対話が機能する</li>
<li>✅ Universal Binaryで動作する</li>
<li>✅ UTF-8/CP932辞書に対応する</li>
</ul>
<h3 id="_22">次のアクション</h3>
<ol>
<li>このドキュメントをレビュー</li>
<li>Phase 1 Week 1の実装開始</li>
<li>週次で進捗確認</li>
</ol>
<hr />
<p><strong>文書バージョン</strong>: 1.0<br />
<strong>最終更新</strong>: 2025-10-16<br />
<strong>著者</strong>: GitHub Copilot (eightman999/Ourin)</p>
        <div class="footer">
            <p>Ourin (桜鈴) - macOS ネイティブ伺かベースウェア</p>
        </div>
    </div>
</body>
</html>