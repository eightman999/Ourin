<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YAYA Core Architecture Diagram</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", "Hiragino Kaku Gothic ProN", "Hiragino Sans", "游ゴシック", YuGothic, "メイリオ", Meiryo, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .content {
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .lang-switcher {
            text-align: right;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
        }
        .lang-switcher a {
            margin: 0 5px;
            padding: 5px 15px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 3px;
            text-decoration: none;
            color: #333;
        }
        .lang-switcher a:hover {
            background-color: #e0e0e0;
        }
        .lang-switcher a.active {
            background-color: #0066cc;
            color: white;
            border-color: #0066cc;
        }
        h1 {
            border-bottom: 3px solid #333;
            padding-bottom: 10px;
            color: #333;
        }
        h2 {
            border-bottom: 2px solid #666;
            padding-bottom: 8px;
            margin-top: 30px;
            color: #444;
        }
        h3 {
            margin-top: 25px;
            color: #555;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: "SF Mono", "Menlo", "Monaco", "Courier New", monospace;
            font-size: 0.9em;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #333;
        }
        pre code {
            background-color: transparent;
            padding: 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f8f8f8;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        a {
            color: #0066cc;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        blockquote {
            border-left: 4px solid #ddd;
            padding-left: 20px;
            margin-left: 0;
            color: #666;
            font-style: italic;
        }
        ul, ol {
            padding-left: 30px;
        }
        li {
            margin: 8px 0;
        }
        hr {
            border: none;
            border-top: 2px solid #ddd;
            margin: 30px 0;
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #0066cc;
            text-decoration: none;
        }
        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="content">
        <div class="lang-switcher">
            
        </div>
        <div class="back-link">
            <a href="index.html">← Back to Index</a>
        </div>
        <h1 id="yaya-core-architecture-diagram">YAYA Core Architecture Diagram</h1>
<p>This document provides visual diagrams of the YAYA Core architecture.</p>
<hr />
<h2 id="system-overview">System Overview</h2>
<div class="codehilite"><pre><span></span><code><span class="err">┌─────────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w">                        </span><span class="n">Ourin</span><span class="o">.</span><span class="n">app</span><span class="w"> </span><span class="p">(</span><span class="n">Swift</span><span class="p">)</span><span class="w">                        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">┌──────────────┐</span><span class="w">  </span><span class="err">┌──────────────┐</span><span class="w">  </span><span class="err">┌──────────────┐</span><span class="w">         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="n">ContentView</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="n">DevToolsView</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="n">Ghost</span><span class="w"> </span><span class="n">Manager</span><span class="err">│</span><span class="w">         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">└──────┬───────┘</span><span class="w">  </span><span class="err">└──────────────┘</span><span class="w">  </span><span class="err">└──────┬───────┘</span><span class="w">         </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">                                     </span><span class="err">│</span><span class="w">                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="err">└──────────────────┬──────────────────┘</span><span class="w">                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">│</span><span class="w">                                     </span><span class="err">│</span>
<span class="err">│</span><span class="w">                    </span><span class="err">┌───────▼────────┐</span><span class="w">                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">                    </span><span class="err">│</span><span class="w">  </span><span class="n">YayaAdapter</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">◄──</span><span class="w"> </span><span class="n">Swift</span><span class="w"> </span><span class="n">IPC</span><span class="w"> </span><span class="n">Client</span><span class="w">     </span><span class="err">│</span>
<span class="err">│</span><span class="w">                    </span><span class="err">│</span><span class="w">   </span><span class="p">(</span><span class="n">Swift</span><span class="p">)</span><span class="w">      </span><span class="err">│</span><span class="w">                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">                    </span><span class="err">└───────┬────────┘</span><span class="w">                           </span><span class="err">│</span>
<span class="err">└────────────────────────────┼──────────────────────────────────┘</span>
<span class="w">                             </span><span class="err">│</span>
<span class="w">                             </span><span class="err">│</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">Process</span><span class="w"> </span><span class="n">I</span><span class="o">/</span><span class="n">O</span>
<span class="w">                             </span><span class="err">│</span><span class="w"> </span><span class="p">(</span><span class="n">stdin</span><span class="o">/</span><span class="n">stdout</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="o">-</span><span class="n">based</span><span class="p">)</span>
<span class="w">                             </span><span class="err">│</span>
<span class="err">┌────────────────────────────▼──────────────────────────────────┐</span>
<span class="err">│</span><span class="w">                   </span><span class="n">yaya_core</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="o">++</span><span class="w"> </span><span class="n">Executable</span><span class="p">)</span><span class="w">                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">┌──────────────────────────────────────────────────────────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">                    </span><span class="n">main</span><span class="o">.</span><span class="n">cpp</span><span class="w">                              </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">              </span><span class="p">(</span><span class="n">IPC</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">Lines</span><span class="p">)</span><span class="w">                   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">└────────────────────────┬─────────────────────────────────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">                           </span><span class="err">│</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">┌────────────────────────▼─────────────────────────────────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">                     </span><span class="n">YayaCore</span><span class="w">                             </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">              </span><span class="p">(</span><span class="n">Command</span><span class="w"> </span><span class="n">Dispatcher</span><span class="p">)</span><span class="w">                        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">                                                          </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="n">Commands</span><span class="p">:</span><span class="w">                                               </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">    </span><span class="err">•</span><span class="w"> </span><span class="nb">load</span><span class="p">(</span><span class="n">ghost_root</span><span class="p">,</span><span class="w"> </span><span class="n">dics</span><span class="p">[],</span><span class="w"> </span><span class="n">encoding</span><span class="p">)</span><span class="w">                 </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">    </span><span class="err">•</span><span class="w"> </span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">,</span><span class="w"> </span><span class="n">refs</span><span class="p">[])</span><span class="w">               </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">    </span><span class="err">•</span><span class="w"> </span><span class="n">unload</span><span class="p">()</span><span class="w">                                            </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">└────────────────────────┬─────────────────────────────────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">                           </span><span class="err">│</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">┌────────────────────────▼─────────────────────────────────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">                </span><span class="n">DictionaryManager</span><span class="w">                         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">                                                          </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">┌──────────────┐</span><span class="w">  </span><span class="err">┌──────────────┐</span><span class="w">  </span><span class="err">┌──────────────┐</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="n">Loader</span><span class="w">       </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">   </span><span class="n">Parser</span><span class="w">     </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">   </span><span class="n">VM</span><span class="w">         </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">              </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">              </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">              </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">File</span><span class="w"> </span><span class="n">I</span><span class="o">/</span><span class="n">O</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">Lexer</span><span class="w">      </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">Execute</span><span class="w">    </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="o">/</span><span class="mi">932</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">Parser</span><span class="w">     </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">Variables</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">Validation</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">AST</span><span class="w">        </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">Functions</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">└──────────────┘</span><span class="w">  </span><span class="err">└──────────────┘</span><span class="w">  </span><span class="err">└──────────────┘</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">                                                          </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">┌──────────────┐</span><span class="w">  </span><span class="err">┌──────────────┐</span><span class="w">                    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="n">BuiltinFuncs</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="n">ShioriAdapter</span><span class="w"> </span><span class="err">│</span><span class="w">                    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">              </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">              </span><span class="err">│</span><span class="w">                    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">RAND</span><span class="p">()</span><span class="w">     </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">Request</span><span class="w">    </span><span class="err">│</span><span class="w">                    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">STRLEN</span><span class="p">()</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">Response</span><span class="w">   </span><span class="err">│</span><span class="w">                    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">SUBSTR</span><span class="p">()</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">•</span><span class="w"> </span><span class="n">Headers</span><span class="w">    </span><span class="err">│</span><span class="w">                    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">└──────────────┘</span><span class="w">  </span><span class="err">└──────────────┘</span><span class="w">                    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">└──────────────────────────────────────────────────────────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<hr />
<h2 id="data-flow-load-dictionary">Data Flow: Load Dictionary</h2>
<div class="codehilite"><pre><span></span><code><span class="n">User</span><span class="w"> </span><span class="n">Action</span><span class="p">:</span><span class="w"> </span><span class="n">Ghost</span><span class="w"> </span><span class="n">Selection</span>
<span class="w">         </span><span class="err">│</span>
<span class="w">         </span><span class="err">▼</span>
<span class="err">┌─────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">YayaAdapter</span><span class="o">.</span><span class="n">swift</span><span class="w">                                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="n">adapter</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="w">                                             </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="n">ghostRoot</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/path/to/ghost/master&quot;</span><span class="p">,</span><span class="w">                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="n">dics</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;aya_bootend.dic&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;aya_menu.dic&quot;</span><span class="p">],</span><span class="w">            </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="n">encoding</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;utf-8&quot;</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="p">)</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">└────────────────┬────────────────────────────────────────────┘</span>
<span class="w">                 </span><span class="err">│</span>
<span class="w">                 </span><span class="err">│</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;cmd&quot;</span><span class="p">:</span><span class="s2">&quot;load&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ghost_root&quot;</span><span class="p">:</span><span class="s2">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;dic&quot;</span><span class="p">:[</span><span class="o">...</span><span class="p">]}</span>
<span class="w">                 </span><span class="err">▼</span>
<span class="err">┌─────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">yaya_core</span><span class="p">:</span><span class="w"> </span><span class="n">main</span><span class="o">.</span><span class="n">cpp</span><span class="w">                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="n">std</span><span class="p">::</span><span class="n">getline</span><span class="p">(</span><span class="n">std</span><span class="p">::</span><span class="n">cin</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="p">)</span><span class="w">                             </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="n">YayaCore</span><span class="p">::</span><span class="n">processCommand</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="w">                           </span><span class="err">│</span>
<span class="err">└────────────────┬────────────────────────────────────────────┘</span>
<span class="w">                 </span><span class="err">│</span>
<span class="w">                 </span><span class="err">▼</span>
<span class="err">┌─────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">DictionaryManager</span><span class="p">::</span><span class="nb">load</span><span class="p">(</span><span class="n">dics</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="p">)</span><span class="w">                     </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="n">FOR</span><span class="w"> </span><span class="n">EACH</span><span class="w"> </span><span class="n">dic_file</span><span class="w"> </span><span class="n">IN</span><span class="w"> </span><span class="n">dics</span><span class="p">:</span><span class="w">                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="mf">1.</span><span class="w"> </span><span class="n">DictionaryLoader</span><span class="p">::</span><span class="n">readFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w">                     </span><span class="err">│</span>
<span class="err">│</span><span class="w">        </span><span class="err">├─</span><span class="w"> </span><span class="n">Detect</span><span class="w"> </span><span class="n">encoding</span><span class="w"> </span><span class="p">(</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="o">/</span><span class="n">CP932</span><span class="p">)</span><span class="w">                     </span><span class="err">│</span>
<span class="err">│</span><span class="w">        </span><span class="err">└─</span><span class="w"> </span><span class="n">Convert</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="w">                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="mf">2.</span><span class="w"> </span><span class="n">Lexer</span><span class="p">::</span><span class="n">tokenize</span><span class="p">(</span><span class="n">source</span><span class="p">)</span><span class="w">                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">        </span><span class="err">├─</span><span class="w"> </span><span class="n">Scan</span><span class="w"> </span><span class="n">characters</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">        </span><span class="err">├─</span><span class="w"> </span><span class="n">Identify</span><span class="w"> </span><span class="n">tokens</span><span class="w"> </span><span class="p">(</span><span class="n">keywords</span><span class="p">,</span><span class="w"> </span><span class="n">operators</span><span class="p">,</span><span class="w"> </span><span class="n">literals</span><span class="p">)</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w">        </span><span class="err">└─</span><span class="w"> </span><span class="n">Skip</span><span class="w"> </span><span class="n">comments</span><span class="w">                                      </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="mf">3.</span><span class="w"> </span><span class="n">Parser</span><span class="p">::</span><span class="n">parse</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span><span class="w">                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">        </span><span class="err">├─</span><span class="w"> </span><span class="n">Build</span><span class="w"> </span><span class="n">Abstract</span><span class="w"> </span><span class="n">Syntax</span><span class="w"> </span><span class="n">Tree</span><span class="w"> </span><span class="p">(</span><span class="n">AST</span><span class="p">)</span><span class="w">                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">        </span><span class="err">├─</span><span class="w"> </span><span class="n">Validate</span><span class="w"> </span><span class="n">syntax</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">        </span><span class="err">└─</span><span class="w"> </span><span class="n">Extract</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">definitions</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="mf">4.</span><span class="w"> </span><span class="n">FunctionRegistry</span><span class="p">::</span><span class="n">register</span><span class="p">(</span><span class="n">functions</span><span class="p">)</span><span class="w">                </span><span class="err">│</span>
<span class="err">│</span><span class="w">        </span><span class="err">└─</span><span class="w"> </span><span class="n">Store</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">AST</span><span class="w"> </span><span class="n">mapping</span><span class="w">                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="n">RETURN</span><span class="w"> </span><span class="n">success</span><span class="o">/</span><span class="n">failure</span><span class="w">                                     </span><span class="err">│</span>
<span class="err">└────────────────┬────────────────────────────────────────────┘</span>
<span class="w">                 </span><span class="err">│</span>
<span class="w">                 </span><span class="err">│</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;ok&quot;</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="o">/</span><span class="bp">false</span><span class="p">}</span>
<span class="w">                 </span><span class="err">▼</span>
<span class="err">┌─────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">YayaAdapter</span><span class="o">.</span><span class="n">swift</span><span class="w">                                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">Bool</span><span class="w"> </span><span class="p">(</span><span class="n">success</span><span class="o">/</span><span class="n">failure</span><span class="p">)</span><span class="w">                             </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<hr />
<h2 id="data-flow-execute-event-get-onboot">Data Flow: Execute Event (GET OnBoot)</h2>
<div class="codehilite"><pre><span></span><code><span class="n">Event</span><span class="o">:</span><span class="w"> </span><span class="n">Ghost</span><span class="w"> </span><span class="n">Boot</span>
<span class="w">         </span><span class="err">│</span>
<span class="w">         </span><span class="err">▼</span>
<span class="err">┌─────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">YayaAdapter</span><span class="o">.</span><span class="na">swift</span><span class="w">                                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="n">adapter</span><span class="o">.</span><span class="na">request</span><span class="o">(</span><span class="w">                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="n">method</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;GET&quot;</span><span class="o">,</span><span class="w">                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="n">id</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;OnBoot&quot;</span><span class="o">,</span><span class="w">                                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="n">headers</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;Charset&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;UTF-8&quot;</span><span class="o">],</span><span class="w">                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="n">refs</span><span class="o">:</span><span class="w"> </span><span class="o">[]</span><span class="w">                                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="o">)</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">└────────────────┬────────────────────────────────────────────┘</span>
<span class="w">                 </span><span class="err">│</span>
<span class="w">                 </span><span class="err">│</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="o">{</span><span class="s2">&quot;cmd&quot;</span><span class="o">:</span><span class="s2">&quot;request&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;method&quot;</span><span class="o">:</span><span class="s2">&quot;GET&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;OnBoot&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">...}</span>
<span class="w">                 </span><span class="err">▼</span>
<span class="err">┌─────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">yaya_core</span><span class="o">:</span><span class="w"> </span><span class="n">YayaCore</span><span class="o">::</span><span class="n">processCommand</span><span class="o">()</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="n">DictionaryManager</span><span class="o">::</span><span class="n">execute</span><span class="o">(</span><span class="s2">&quot;OnBoot&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">[])</span><span class="w">                 </span><span class="err">│</span>
<span class="err">└────────────────┬────────────────────────────────────────────┘</span>
<span class="w">                 </span><span class="err">│</span>
<span class="w">                 </span><span class="err">▼</span>
<span class="err">┌─────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">DictionaryManager</span><span class="o">::</span><span class="n">execute</span><span class="o">(</span><span class="n">funcName</span><span class="o">,</span><span class="w"> </span><span class="n">args</span><span class="o">)</span><span class="w">                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="n">FunctionRegistry</span><span class="o">::</span><span class="n">find</span><span class="o">(</span><span class="s2">&quot;OnBoot&quot;</span><span class="o">)</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">      </span><span class="err">└─</span><span class="w"> </span><span class="n">Retrieve</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="n">AST</span><span class="w">                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="n">VM</span><span class="o">::</span><span class="n">execute</span><span class="o">(</span><span class="kd">function</span><span class="o">,</span><span class="w"> </span><span class="n">args</span><span class="o">)</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">      </span><span class="err">├─</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">frame</span><span class="w">                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">      </span><span class="err">├─</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">reference</span><span class="o">[</span><span class="mi">0</span><span class="o">..</span><span class="n">n</span><span class="o">]</span><span class="w"> </span><span class="n">variables</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w">                                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">      </span><span class="err">└─</span><span class="w"> </span><span class="n">Evaluate</span><span class="w"> </span><span class="n">AST</span><span class="w"> </span><span class="n">nodes</span><span class="o">:</span><span class="w">                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">│</span><span class="w">                                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">├─</span><span class="w"> </span><span class="n">Variable</span><span class="w"> </span><span class="n">assignment</span><span class="w">                             </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">│</span><span class="w">  </span><span class="n">_var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;value&quot;</span><span class="w">                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">│</span><span class="w">  </span><span class="n">VariableStore</span><span class="o">::</span><span class="kd">set</span><span class="o">(</span><span class="s2">&quot;_var&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;value&quot;</span><span class="o">)</span><span class="w">            </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">│</span><span class="w">                                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">├─</span><span class="w"> </span><span class="n">Function</span><span class="w"> </span><span class="n">call</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">│</span><span class="w">  </span><span class="n">RAND</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span><span class="w">                                        </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">│</span><span class="w">  </span><span class="n">BuiltinFunctions</span><span class="o">::</span><span class="n">call</span><span class="o">(</span><span class="s2">&quot;RAND&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="mi">10</span><span class="o">])</span><span class="w">           </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">│</span><span class="w">                                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">├─</span><span class="w"> </span><span class="n">Conditional</span><span class="w"> </span><span class="n">execution</span><span class="w">                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">│</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">condition</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="o">}</span><span class="w">              </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">│</span><span class="w">                                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="err">└─</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">concatenation</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">             </span><span class="s2">&quot;\0\s[0]&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;Hello&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;\e&quot;</span><span class="w">                      </span><span class="err">│</span>
<span class="err">│</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;\0\s[0]Hello\e&quot;</span><span class="w">                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="n">Return</span><span class="w"> </span><span class="n">SakuraScript</span><span class="w"> </span><span class="n">string</span><span class="w">                             </span><span class="err">│</span>
<span class="err">└────────────────┬────────────────────────────────────────────┘</span>
<span class="w">                 </span><span class="err">│</span>
<span class="w">                 </span><span class="err">│</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="o">{</span><span class="s2">&quot;ok&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;status&quot;</span><span class="o">:</span><span class="w"> </span><span class="mi">200</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;\\0\\s[0]Hello\\e&quot;</span><span class="o">}</span>
<span class="w">                 </span><span class="err">▼</span>
<span class="err">┌─────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">YayaAdapter</span><span class="o">.</span><span class="na">swift</span><span class="w">                                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">YayaResponse</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">└────────────────┬────────────────────────────────────────────┘</span>
<span class="w">                 </span><span class="err">│</span>
<span class="w">                 </span><span class="err">▼</span>
<span class="err">┌─────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">Ourin</span><span class="o">:</span><span class="w"> </span><span class="n">SakuraScript</span><span class="w"> </span><span class="n">Renderer</span><span class="w">                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="n">Parse</span><span class="o">:</span><span class="w"> </span><span class="o">\</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Sakura</span><span class="w"> </span><span class="n">scope</span><span class="w">                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="o">\</span><span class="n">s</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Surface</span><span class="w"> </span><span class="mi">0</span><span class="w">                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="n">Hello</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Text</span><span class="w">                                        </span><span class="err">│</span>
<span class="err">│</span><span class="w">          </span><span class="o">\</span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">End</span><span class="w">                                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="n">Display</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">balloon</span><span class="w">                                        </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<hr />
<h2 id="component-responsibilities">Component Responsibilities</h2>
<h3 id="swift-layer-ourinapp">Swift Layer (Ourin.app)</h3>
<div class="codehilite"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│ YayaAdapter.swift                                       │
│                                                         │
│ Responsibilities:                                       │
│  • Launch yaya_core process                            │
│  • Manage process lifecycle                            │
│  • Encode requests to JSON                             │
│  • Decode responses from JSON                          │
│  • Handle process termination                          │
│  • Error propagation to UI                             │
│                                                         │
│ Does NOT:                                               │
│  • Parse YAYA dictionaries                             │
│  • Execute YAYA code                                    │
│  • Understand YAYA syntax                              │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="c-layer-yaya_core">C++ Layer (yaya_core)</h3>
<div class="codehilite"><pre><span></span><code><span class="err">┌─────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">main</span><span class="o">.</span><span class="n">cpp</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">YayaCore</span><span class="w">                                     </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Responsibilities</span><span class="p">:</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Read</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">stdin</span><span class="w">                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Write</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">stdout</span><span class="w">                                </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Dispatch</span><span class="w"> </span><span class="n">commands</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Top</span><span class="o">-</span><span class="n">level</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">handling</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Does</span><span class="w"> </span><span class="n">NOT</span><span class="p">:</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Know</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">Swift</span><span class="w">                                     </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Access</span><span class="w"> </span><span class="n">UI</span><span class="w">                                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Manage</span><span class="w"> </span><span class="n">ghost</span><span class="w"> </span><span class="n">files</span><span class="w">                                   </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────┘</span>

<span class="err">┌─────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">DictionaryManager</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Responsibilities</span><span class="p">:</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">parse</span><span class="w"> </span><span class="o">.</span><span class="n">dic</span><span class="w"> </span><span class="n">files</span><span class="w">                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Manage</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">registry</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Execute</span><span class="w"> </span><span class="n">YAYA</span><span class="w"> </span><span class="n">functions</span><span class="w">                              </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">Lexer</span><span class="o">/</span><span class="n">Parser</span><span class="o">/</span><span class="n">VM</span><span class="w">                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Does</span><span class="w"> </span><span class="n">NOT</span><span class="p">:</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Render</span><span class="w"> </span><span class="n">SakuraScript</span><span class="w">                                 </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Manage</span><span class="w"> </span><span class="n">ghost</span><span class="w"> </span><span class="n">lifecycle</span><span class="w">                              </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────┘</span>

<span class="err">┌─────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">Lexer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Parser</span><span class="w">                                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Responsibilities</span><span class="p">:</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Tokenize</span><span class="w"> </span><span class="n">YAYA</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">code</span><span class="w">                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Build</span><span class="w"> </span><span class="n">Abstract</span><span class="w"> </span><span class="n">Syntax</span><span class="w"> </span><span class="n">Tree</span><span class="w">                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Syntax</span><span class="w"> </span><span class="n">validation</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">reporting</span><span class="w">                                      </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Does</span><span class="w"> </span><span class="n">NOT</span><span class="p">:</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Execute</span><span class="w"> </span><span class="n">code</span><span class="w">                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Manage</span><span class="w"> </span><span class="n">variables</span><span class="w">                                     </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────┘</span>

<span class="err">┌─────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">VM</span><span class="w"> </span><span class="p">(</span><span class="n">Virtual</span><span class="w"> </span><span class="n">Machine</span><span class="p">)</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Responsibilities</span><span class="p">:</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Execute</span><span class="w"> </span><span class="n">AST</span><span class="w"> </span><span class="n">nodes</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Manage</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">global</span><span class="p">)</span><span class="w">                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">built</span><span class="o">-</span><span class="ow">in</span><span class="w"> </span><span class="n">functions</span><span class="w">                             </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">flow</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="o">/</span><span class="k">while</span><span class="o">/</span><span class="k">return</span><span class="p">)</span><span class="w">               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Stack</span><span class="w"> </span><span class="n">management</span><span class="w">                                     </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Does</span><span class="w"> </span><span class="n">NOT</span><span class="p">:</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Parse</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">code</span><span class="w">                                    </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">files</span><span class="w">                                           </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────┘</span>

<span class="err">┌─────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">BuiltinFunctions</span><span class="w">                                        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Responsibilities</span><span class="p">:</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Implement</span><span class="w"> </span><span class="n">YAYA</span><span class="w"> </span><span class="n">built</span><span class="o">-</span><span class="ow">in</span><span class="w"> </span><span class="n">functions</span><span class="w">                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="n">conversion</span><span class="w">                                      </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">manipulation</span><span class="w">                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Random</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">generation</span><span class="w">                            </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="w"> </span><span class="n">operations</span><span class="w">                                     </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Does</span><span class="w"> </span><span class="n">NOT</span><span class="p">:</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Parse</span><span class="w"> </span><span class="n">code</span><span class="w">                                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Manage</span><span class="w"> </span><span class="n">user</span><span class="o">-</span><span class="n">defined</span><span class="w"> </span><span class="n">functions</span><span class="w">                       </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────┘</span>

<span class="err">┌─────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="n">ShioriAdapter</span><span class="w">                                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Responsibilities</span><span class="p">:</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Map</span><span class="w"> </span><span class="n">SHIORI</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">YAYA</span><span class="w"> </span><span class="n">functions</span><span class="w">               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">reference</span><span class="p">[]</span><span class="w"> </span><span class="n">variables</span><span class="w">                           </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Format</span><span class="w"> </span><span class="n">SHIORI</span><span class="w"> </span><span class="n">responses</span><span class="w">                             </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">codes</span><span class="w">                                  </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                         </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="n">Does</span><span class="w"> </span><span class="n">NOT</span><span class="p">:</span><span class="w">                                               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Execute</span><span class="w"> </span><span class="n">YAYA</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">directly</span><span class="w">                          </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="err">•</span><span class="w"> </span><span class="n">Parse</span><span class="w"> </span><span class="n">dictionaries</span><span class="w">                                   </span><span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────┘</span>
</code></pre></div>

<hr />
<h2 id="implementation-status">Implementation Status</h2>
<div class="codehilite"><pre><span></span><code>Component             Status      Phase
─────────────────────────────────────────
main.cpp              ✅ Done     -
YayaCore              ✅ Done     -
YayaAdapter.swift     ✅ Done     -
DictionaryManager     ⚠️  Stub    Phase 1
Lexer                 ❌ TODO     Phase 1 Week 1
Parser                ❌ TODO     Phase 1 Week 1-2
AST                   ❌ TODO     Phase 1 Week 1-2
VM                    ❌ TODO     Phase 1 Week 2
Value                 ❌ TODO     Phase 1 Week 2
VariableStore         ❌ TODO     Phase 1 Week 2
FunctionRegistry      ❌ TODO     Phase 1 Week 2
BuiltinFunctions      ❌ TODO     Phase 1 Week 2-3
ShioriAdapter         ❌ TODO     Phase 1 Week 3
Encoding Support      ❌ TODO     Phase 1 Week 1
Error Handling        ❌ TODO     Phase 1 Week 3
Unit Tests            ❌ TODO     Phase 1 Week 1-3
─────────────────────────────────────────
Arrays/Dicts          ❌ TODO     Phase 2
Loops                 ❌ TODO     Phase 2
Regex                 ❌ TODO     Phase 2
Performance Opt       ❌ TODO     Phase 2-3
</code></pre></div>

<hr />
<h2 id="directory-layout">Directory Layout</h2>
<div class="codehilite"><pre><span></span><code>/home/runner/work/Ourin/Ourin/
│
├── yaya_core/                      # C++ YAYA Core Module
│   ├── CMakeLists.txt              # Build config (Universal Binary)
│   ├── README.md                   # Quick start guide
│   ├── .gitignore                  # Build artifacts exclusion
│   │
│   ├── src/                        # Source code
│   │   ├── main.cpp                # ✅ IPC entry point
│   │   ├── YayaCore.{cpp,hpp}      # ✅ Command dispatcher
│   │   ├── DictionaryManager.{cpp,hpp}  # ⚠️ Stub only
│   │   ├── Lexer.{cpp,hpp}         # ❌ TODO Phase 1
│   │   ├── Parser.{cpp,hpp}        # ❌ TODO Phase 1
│   │   ├── AST.{cpp,hpp}           # ❌ TODO Phase 1
│   │   ├── VM.{cpp,hpp}            # ❌ TODO Phase 1
│   │   ├── Value.{cpp,hpp}         # ❌ TODO Phase 1
│   │   ├── VariableStore.{cpp,hpp} # ❌ TODO Phase 1
│   │   ├── FunctionRegistry.{cpp,hpp}  # ❌ TODO Phase 1
│   │   ├── BuiltinFunctions.{cpp,hpp}  # ❌ TODO Phase 1
│   │   ├── ShioriAdapter.{cpp,hpp}     # ❌ TODO Phase 1
│   │   └── Utils.{cpp,hpp}         # ❌ TODO Phase 1
│   │
│   ├── tests/                      # ❌ TODO Phase 1
│   │   ├── lexer_test.cpp
│   │   ├── parser_test.cpp
│   │   ├── vm_test.cpp
│   │   └── integration_test.cpp
│   │
│   └── build/                      # Git-ignored build directory
│
├── Ourin/Yaya/                     # Swift Integration
│   └── YayaAdapter.swift           # ✅ Process manager + IPC client
│
├── docs/                           # Documentation
│   ├── YAYA_CORE_INVESTIGATION_REPORT.md      # 🆕 調査報告
│   ├── YAYA_CORE_IMPLEMENTATION_PLAN.md       # 🆕 実装計画
│   ├── YAYA_CORE_TECHNICAL_SPEC.md            # 🆕 技術仕様
│   ├── YAYA_CORE_EXECUTIVE_SUMMARY.md         # 🆕 エグゼクティブサマリー
│   ├── YAYA_CORE_ARCHITECTURE.md              # 🆕 This file
│   ├── OURIN_YAYA_ADAPTER_SPEC_1.0M.md        # ✅ IPC仕様
│   └── OURIN_USL_1.0M_SPEC.md                 # ✅ USL仕様
│
└── emily4/                         # Test Data
    └── ghost/master/*.dic          # 50+ YAYA dictionary files
</code></pre></div>

<hr />
<p><strong>Document</strong>: Architecture Diagram<br />
<strong>Created</strong>: 2025-10-16<br />
<strong>Project</strong>: Ourin (eightman999/Ourin)</p>
        <div class="footer">
            <p>Generated: 2025-10-23 | <a href="../README_ja-jp.md">Source (MD)</a></p>
        </div>
    </div>
</body>
</html>
